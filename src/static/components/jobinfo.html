<uib-accordion close-others="oneAtATime">
    <uib-accordion-group is-open="status.open">
        <uib-accordion-heading>
            <h4>Jobs<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i></h4>
        </uib-accordion-heading>
        <div ng-repeat="(node,jobs) in jobs" class="container-fluid">
            <h4> {{node}} </h4>
            <div ng-repeat="job in jobs" class="panel panel-{{getProgressType(job.status)}}">
                <div class="panel-heading">
                    <p>
                    <button ng-show="job.status=='running'" class="btn btn-danger pull-right" ng-click="finishJob(node, job.id)"><i class="glyphicon glyphicon-alert"></i> Stop</button>
                    <button ng-show="job.status=='finished'" class="btn btn-success pull-right" ng-click="finishJob(node, job.id)"><i class="glyphicon glyphicon-ok"></i> Close</button>
                    <h5><strong>Job: </strong>{{job.id}}</h5></p>
                </div>
                <div class="panel-body">
                    <div class="col-md-4">
                        <strong>Source disk: </strong>{{job.disk}}<br/>
                        <strong>Operation: </strong>{{job.operation}}<br/>
                        <strong>Status: </strong>{{job.status}}<br/>
                        <strong>Start time: </strong>{{job.start_time}}<br/>
                        <strong>End time: </strong>{{job.end_time}}<br/>
                    </div>
                    <div class="col-md-8">
                        <div ng-repeat="partition in job.partitions">
                            <div class="col-md-3">
                                <span class="align-right"><strong>Partition:</strong> {{partition.name}}</span>
                            </div>
                            <div class="col-md-9">
                                <uib-progressbar max="100" value="partition.completed" type="{{getProgressType(partition.status)}}">{{partition.status}} ({{partition.completed}}%)</uib-progressbar>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/>
        <button class="btn pull-right" ng-click="update()" ng-disabled="loading">
            <span ng-if="loading" class="glyphicon glyphicon-refresh"></span> Refresh</button>
    </uib-accordion-group>
</uib-accordion>
